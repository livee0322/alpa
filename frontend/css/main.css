/* =========================
   GLOBAL TOKENS
========================= */
:root{
  --bg:#fff; --text:#222; --muted:#6b7280; --line:#eceff1;

  /* LUVEE 고유 퍼플 계열 */
  --pri:#6C63FF;
  --pri-weak:#f4f5ff;
  --ok:#10b981;

  --shadow-1:0 2px 8px rgba(0,0,0,.06);
  --shadow-2:0 8px 24px rgba(0,0,0,.08);

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  /* 상단 스택 기본값(모듈이 실제 높이로 덮어씀 가능) */
  --banner-h: 40px;
  --header-h: 56px;
  --top-h:    48px;

  /* 본문 여백 계산치 */
  --stack-h: calc(var(--banner-h) + var(--header-h) + var(--top-h));
}

/* =========================
   RESET / SAFETY
========================= */
html,body{height:100%; max-width:100%; overflow-x:hidden;}
*{box-sizing:border-box; min-width:0;}
img,video,canvas{max-width:100%; height:auto; display:block;}
a{text-decoration:none; color:inherit;}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:Pretendard,system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* =========================
   TOP STACK (ID 기반, sticky)
   - banner/header/top-tab 세 개만 유지
========================= */

/* 배너 */
#banner-container{
  position:sticky; top:var(--safe-top); z-index:1100;
  background:var(--pri); color:#fff; min-height:var(--banner-h);
}
#banner-container .lv-banner-in{
  padding:12px 16px;
  font-weight:700; font-size:14px; line-height:1.3
}

/* 헤더 */
#header-container{
  position:sticky;
  top:calc(var(--safe-top) + var(--banner-h)); z-index:1000;
  height:var(--header-h);
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:0 16px;
  background:#fff;
  border-bottom:1px solid #eef0f3;
}
#header-container > *{flex-shrink:0}
#header-container img{height:28px; width:auto; display:block; max-width:100%}
#header-container a,#header-container button{
  white-space:nowrap; font-weight:800; color:#4b5563;
  background:none; border:0; padding:6px 8px
}

/* 상단 탭 */
#top-tab-container{
  position:sticky;
  top:calc(var(--safe-top) + var(--banner-h) + var(--header-h));
  z-index:990;
  background:#fff; border-bottom:1px solid #f1f3f5; height:var(--top-h);
  /* 스크롤 페이드 효과 */
  mask-image: linear-gradient(90deg, transparent 0, #000 12px, #000 calc(100% - 12px), transparent 100%);
}
#top-tab-container > ul{
  display:flex; gap:10px; padding:8px 12px; margin:0; list-style:none;
  overflow-x:auto; overflow-y:hidden;
  -ms-overflow-style:none; scrollbar-width:none;
}
#top-tab-container > ul::-webkit-scrollbar{display:none;}
#top-tab-container a,
#top-tab-container button{
  display:inline-flex; align-items:center; height:34px; padding:0 14px;
  border-radius:999px;
  border:1px solid #e0e0f5;
  background:var(--pri-weak); color:var(--pri);
  font-weight:800; font-size:.9rem; white-space:nowrap;
  transition:transform .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease, border-color .15s ease;
  box-shadow: 0 1px 0 rgba(108,99,255,.04);
}
#top-tab-container a:hover{box-shadow:0 2px 8px rgba(0,0,0,.06)}
#top-tab-container a:active{transform:translateY(1px)}
#top-tab-container a:focus-visible{
  outline:2px solid rgba(108,99,255,.35);
  outline-offset:2px;
}
#top-tab-container .active{
  background:var(--pri);
  color:#fff;
  border-color:var(--pri);
  box-shadow:0 6px 14px rgba(108,99,255,.22);
}

/* 저감 모션 */
@media (prefers-reduced-motion: reduce){
  #top-tab-container a, #top-tab-container button{transition:none}
}

/* =========================
   MAIN CONTAINER
========================= */
.lv-main,.page{
  width:100%; max-width:720px; margin:0 auto;
  padding:16px 14px calc(92px + var(--safe-bottom));
  margin-top:calc(var(--stack-h) + 8px);
}

/* =========================
   SECTIONS / CARDS
========================= */
.lv-section{margin-top:18px}
.lv-section-head{display:flex; align-items:center; gap:.6em; margin:4px 0 10px}
.lv-section-head h2{margin:0; font-size:1.18rem; font-weight:900}
.lv-more{
  margin-left:auto;
  background:var(--pri-weak);
  color:var(--pri);
  padding:6px 12px;
  border-radius:999px;
  border:1px solid #e0e0f5;
  font-weight:800
}

.lv-hscroll{
  display:flex; gap:12px; overflow-x:auto;
  padding:4px 2px 10px; scroll-snap-type:x mandatory
}
.lv-hscroll > *{flex:0 0 auto; min-width:0}
.lv-hscroll::-webkit-scrollbar{height:6px}
.lv-hscroll::-webkit-scrollbar-thumb{background:#e5e7eb; border-radius:999px}

.lv-card{
  min-width:176px;
  background:#fff;
  border-radius:16px;
  box-shadow:var(--shadow-1);
  padding:10px;
  border:1px solid #f3f4f6;
  transition:transform .18s ease, box-shadow .18s ease;
  scroll-snap-align:start
}
.lv-card:hover{transform:translateY(-3px); box-shadow:var(--shadow-2)}
.lv-thumb{width:100%; height:112px; border-radius:12px; background:#eee; object-fit:cover}
.lv-title{margin:8px 2px 0; font-weight:800; font-size:.98rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.lv-meta{margin:4px 2px 0; color:var(--muted); font-size:.86rem}

.lv-schedule{display:flex; flex-direction:column; gap:10px}
.lv-s-item{
  display:flex; align-items:center; gap:12px;
  background:#fff; border:1px solid #f1f3f5;
  border-radius:14px; padding:10px 12px;
  box-shadow:var(--shadow-1)
}
.lv-s-thumb{width:48px; height:48px; border-radius:12px; background:#eee; object-fit:cover}
.lv-s-title{font-weight:800; font-size:.98rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.lv-s-meta{font-size:.86rem; color:var(--muted); margin-top:2px}

.lv-empty{
  padding:14px 12px;
  border:1px dashed #e5e7eb;
  border-radius:12px;
  color:#9aa3af;
  font-weight:700
}

/* =========================
   BOTTOM TABS
========================= */
.lv-bottom{
  position:fixed; left:0; right:0; bottom:0; z-index:60;
  display:flex; background:#fff;
  border-top:1px solid var(--line);
  box-shadow:0 -8px 22px rgba(0,0,0,.06)
}
.lv-bottom a{
  flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px;
  padding:8px 0 10px;
  color:#9aa3af; font-weight:800; font-size:.78rem
}
.lv-bottom .ico{width:26px; height:26px}
.lv-bottom .ico svg{
  width:100%; height:100%;
  stroke:#9aa3af; fill:none;
  stroke-width:2; stroke-linecap:round; stroke-linejoin:round;
  transition:stroke .15s ease, transform .15s ease
}
.lv-bottom a:focus-visible{outline:2px solid rgba(108,99,255,.35); outline-offset:2px}
.lv-bottom a.active{color:var(--text)}
.lv-bottom a.active .ico svg{stroke:var(--pri); transform:translateY(-1px)}

/* =========================
   LOGIN PAGE EXCEPTIONS
========================= */
body[data-page="login"] #header-container,
body[data-page="login"] #top-tab-container{ display:none !important; }
body[data-page="login"] .lv-main,
body[data-page="login"] .page{
  margin-top: calc(var(--banner-h) + 8px) !important;
}